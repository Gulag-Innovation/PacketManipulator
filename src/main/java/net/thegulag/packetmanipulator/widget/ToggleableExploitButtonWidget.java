package net.thegulag.packetmanipulator.widget;

import net.thegulag.packetmanipulator.util.Side;
import net.minecraft.text.Text;
import net.minecraft.util.Formatting;

public class ToggleableExploitButtonWidget extends ExploitButtonWidget {

    private boolean toggled;

    public ToggleableExploitButtonWidget(Text message, Side side, PressAction pressAction, boolean defaultValue) {
        super(message, side, button -> {
            final ToggleableExploitButtonWidget buttonWidget = (ToggleableExploitButtonWidget) button;
            buttonWidget.toggle();

            pressAction.onPress(button);
        });
        this.toggled = defaultValue;
    }

    @Override
    public Text getMessage() {
        return super.getMessage().copy().styled(style -> style.withColor(isToggled() ? Formatting.GREEN : Formatting.DARK_RED));
    }

    public void disable() {
        this.toggled = false;
    }

    public boolean isToggled() {
        return toggled;
    }

    public void toggle() {
        this.toggled = !this.toggled;
    }
}
